[{"date":"2022-10-19T07:57:46.962Z","url":"/2022/10/19/C#%E9%9B%86%E5%90%88/","categories":[["undefined",""]],"content":"Dictionary接口继承及规范函数 添加键基本存储结构 INSERT 原码 Initialize方法 从下至下标记 1.键不能为null 2.buckets 调用第一次添加前为默认初始值，即null, 第一次：size 调用后结果为3并初始化buckets，entries，buckets 初始值为 -1 3.comparer.GetHashCode(key) 如果对象未实现GetHashCode Method 将会调用默认的 object.InternalGetHashCode(this); 该方法由c&#x2F;c++实现 同等如果对象未重写Equals将会使用object.InternalEquals 对于 interfaceDIctionary IEqualityComparer,class Dictionary 使用该派生类System.Collections.Generic.EqualityComparer 实现，其初始位置于构造方法 取得hash 与 0x7FFFFFFF (7—-0111 F—-1111 ) 既 2 ^ 31 - 1 进行 and 运算 如果hash值超过 int.max 返回 int.max 4.hashcode 与 buckets.Length 进行取模得到entries数组下标 总结： 第一次添加代码简化为 5.当entries长度和count相同时进行的扩容 "}]